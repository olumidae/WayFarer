{"version":3,"sources":["../../server/test/test.test.js"],"names":["expect","chai","use","chaiHttp","admintoken","token","describe","before","done","createAdmin","deleteBooking","deleteText","pool","query","console","log","it","request","app","post","send","first_name","last_name","email","password","end","err","res","status","to","be","equal","body","have","property","data","an","isAdmin","address","set","number_plate","manufacturer","model","year","capacity","bus_id","origin","destination","trip_date","fare","user","trip_id","seat_number","a","get","patch"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;IAEQA,M,GAAWC,gB,CAAXD,M;;AACRC,iBAAKC,GAAL,CAASC,oBAAT;;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,KAAK,GAAG,EAAZ;AACAC,QAAQ,CAAC,qBAAD,EAAwB,YAAM;AACpCC,EAAAA,MAAM,CAAC,UAACC,IAAD,EAAU;AACf,QAAMC,WAAW,oQAAjB;AAIA,QAAMC,aAAa,GAAG,mBAAtB;AACA,QAAMC,UAAU,GAAG,oBAAnB;;AACAC,mBAAKC,KAAL,CAAWH,aAAX,EAA0B,YAAM;AAC9BE,qBAAKC,KAAL,CAAWJ,WAAX,EAAwB,YAAM;AAC5BD,QAAAA,IAAI;AACL,OAFD,WAES,YAAM;AACbM,QAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACD,OAJD;AAKD,KAND,WAMS,YAAM;AACbD,MAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACD,KARD;AASD,GAhBK,CAAN;AAkBAC,EAAAA,EAAE,CAAC,0BAAD,EAA6B,UAACR,IAAD,EAAU;AACvCP,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,qBAFR,EAGGC,IAHH,CAGQ;AACJC,MAAAA,UAAU,EAAE,MADR;AAEJC,MAAAA,SAAS,EAAE,MAFP;AAGJC,MAAAA,KAAK,EAAE,oBAHH;AAIJC,MAAAA,QAAQ,EAAE;AAJN,KAHR,EAQKC,GARL,CAQS,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,SAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,SAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,OAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,UAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAlBH;AAmBD,GApBC,CAAF;AAsBAQ,EAAAA,EAAE,CAAC,uCAAD,EAA0C,UAACR,IAAD,EAAU;AACpDP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AAEJiB,MAAAA,OAAO,EAAE;AAFL,KAFR,EAMGZ,GANH,CAMO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,GAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAZH;AAaD,GAdC,CAAF;AAgBAQ,EAAAA,EAAE,CAAC,+BAAD,EAAkC,UAACR,IAAD,EAAU;AAC5CP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AACJC,MAAAA,UAAU,EAAE,EADR;AAEJC,MAAAA,SAAS,EAAE,EAFP;AAGJC,MAAAA,KAAK,EAAE,EAHH;AAIJe,MAAAA,OAAO,EAAE,EAJL;AAKJd,MAAAA,QAAQ,EAAE;AALN,KAFR,EASGC,GATH,CASO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,GAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAfH;AAgBD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,wBAAD,EAA2B,UAACR,IAAD,EAAU;AACrCP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGoB,GAFH,CAEO,cAFP,EAEuB,kBAFvB,EAGGA,GAHH,CAGO,QAHP,EAGiB,kBAHjB,EAIGnB,IAJH,CAIQ;AACJC,MAAAA,UAAU,EAAE,MADR;AAEJC,MAAAA,SAAS,EAAE,MAFP;AAGJC,MAAAA,KAAK,EAAE,oBAHH;AAIJC,MAAAA,QAAQ,EAAE;AAJN,KAJR,EAUGC,GAVH,CAUO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,OAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAhBH;AAiBD,GAlBC,CAAF;AAoBAQ,EAAAA,EAAE,CAAC,mCAAD,EAAsC,UAACR,IAAD,EAAU;AAChDP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AACJG,MAAAA,KAAK,EAAE,oBADH;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAFR,EAMGC,GANH,CAMO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,SAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,SAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,OAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA/B,MAAAA,KAAK,GAAGsB,GAAG,CAACK,IAAJ,CAASG,IAAT,CAAc9B,KAAtB;AACAG,MAAAA,IAAI;AACL,KAhBH;AAiBD,GAlBC,CAAF;AAoBAQ,EAAAA,EAAE,CAAC,yBAAD,EAA4B,UAACR,IAAD,EAAU;AACtCP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AACJG,MAAAA,KAAK,EAAE,EADH;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAFR,EAMGC,GANH,CAMO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAbC,CAAF;AAeAQ,EAAAA,EAAE,CAAC,oBAAD,EAAuB,UAACR,IAAD,EAAU;AACjCP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AACJG,MAAAA,KAAK,EAAE,oBADH;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAFR,EAMGC,GANH,CAMO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,OAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAbH;AAcD,GAfC,CAAF;AAiBAQ,EAAAA,EAAE,CAAC,kBAAD,EAAqB,UAACR,IAAD,EAAU;AAC/BP,qBAAKgB,OAAL,CAAaC,eAAb,EACGC,IADH,CACQ,qBADR,EAEGC,IAFH,CAEQ;AACJG,MAAAA,KAAK,EAAE,qBADH;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAFR,EAMGC,GANH,CAMO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,SAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,SAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,OAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACAhC,MAAAA,UAAU,GAAGuB,GAAG,CAACK,IAAJ,CAASG,IAAT,CAAc9B,KAA3B;AACAG,MAAAA,IAAI;AACL,KAhBH;AAiBD,GAlBC,CAAF;AAoBAQ,EAAAA,EAAE,CAAC,yBAAD,EAA4B,UAACR,IAAD,EAAU;AACtCP,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,aAFR,EAGGoB,GAHH,CAGO,OAHP,EAGgBnC,UAHhB,EAIGgB,IAJH,CAIQ;AACJoB,MAAAA,YAAY,EAAE,UADV;AAEJC,MAAAA,YAAY,EAAE,QAFV;AAGJC,MAAAA,KAAK,EAAE,OAHH;AAIJC,MAAAA,IAAI,EAAE,MAJF;AAKJC,MAAAA,QAAQ,EAAE;AALN,KAJR,EAWGnB,GAXH,CAWO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BI,IAA3B,CAAgCF,KAAhC,CAAsC,SAAtC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAjBH;AAkBD,GAnBC,CAAF;AAqBAQ,EAAAA,EAAE,CAAC,4BAAD,EAA+B,UAACR,IAAD,EAAU;AACzCP,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,eAFR,EAGGoB,GAHH,CAGO,OAHP,EAGgBnC,UAHhB,EAIGgB,IAJH,CAIQ;AACJyB,MAAAA,MAAM,EAAE,GADJ;AAEJC,MAAAA,MAAM,EAAE,OAFJ;AAGJC,MAAAA,WAAW,EAAE,MAHT;AAIJC,MAAAA,SAAS,EAAE,YAJP;AAKJC,MAAAA,IAAI,EAAE;AALF,KAJR,EAWGxB,GAXH,CAWO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BI,IAA3B,CAAgCF,KAAhC,CAAsC,SAAtC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBN,EAAtB,CAAyBI,IAAzB,CAA8BC,QAA9B,CAAuC,MAAvC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAlBH;AAmBD,GApBC,CAAF;AAsBAQ,EAAAA,EAAE,CAAC,6BAAD,EAAgC,UAACR,IAAD,EAAU;AAC1CP,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,eAFR,EAGGoB,GAHH,CAGO,OAHP,EAGgBlC,KAHhB,EAIGe,IAJH,CAIQ;AACJyB,MAAAA,MAAM,EAAE,GADJ;AAEJC,MAAAA,MAAM,EAAE,QAFJ;AAGJC,MAAAA,WAAW,EAAE,OAHT;AAIJC,MAAAA,SAAS,EAAE,YAJP;AAKJC,MAAAA,IAAI,EAAE;AALF,KAJR,EAWGxB,GAXH,CAWO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBE,EAAnB,CAAsBC,KAAtB,CAA4B,GAA5B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACA1B,MAAAA,IAAI;AACL,KAhBH;AAiBD,GAlBC,CAAF;AAoBAQ,EAAAA,EAAE,CAAC,oBAAD,EAAuB,UAACR,IAAD,EAAU;AACjC,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,kBAFR,EAGGC,IAHH,CAGQ8B,IAHR,EAIGX,GAJH,CAIO,OAJP,EAIgBnC,UAJhB,EAKGqB,GALH,CAKO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,QAA5B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,oBAAD,EAAuB,UAACR,IAAD,EAAU;AACjC,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGoC,GAFH,CAEO,kBAFP,EAGGlC,IAHH,CAGQ8B,IAHR,EAIGX,GAJH,CAIO,OAJP,EAIgBnC,UAJhB,EAKGqB,GALH,CAKO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,OAA5B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,mBAAD,EAAsB,UAACR,IAAD,EAAU;AAChC,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,kBAFR,EAGGC,IAHH,CAGQ8B,IAHR,EAIGX,GAJH,CAIO,OAJP,EAIgBlC,KAJhB,EAKGoB,GALH,CAKO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,QAA5B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,0CAAD,EAA6C,UAACR,IAAD,EAAU;AACvD,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGC,IAFH,CAEQ,kBAFR,EAGGC,IAHH,CAGQ8B,IAHR,EAIGX,GAJH,CAIO,OAJP,EAIgBlC,KAJhB,EAKGoB,GALH,CAKO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,GAAjC;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,mBAAD,EAAsB,UAACR,IAAD,EAAU;AAChC,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGoC,GAFH,CAEO,kBAFP,EAGGlC,IAHH,CAGQ8B,IAHR,EAIGX,GAJH,CAIO,OAJP,EAIgBlC,KAJhB,EAKGoB,GALH,CAKO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,OAA5B;AACA5B,MAAAA,IAAI;AACL,KAXH;AAYD,GAjBC,CAAF;AAmBAQ,EAAAA,EAAE,CAAC,gCAAD,EAAmC,UAACR,IAAD,EAAU;AAC7C,QAAM0C,IAAI,GAAG;AACXC,MAAAA,OAAO,EAAE,GADE;AAEXC,MAAAA,WAAW,EAAE;AAFF,KAAb;;AAIAnD,qBACGgB,OADH,CACWC,eADX,EAEGoC,GAFH,CAEO,kBAFP,EAGGlC,IAHH,CAGQ8B,IAHR,EAIGzB,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACA1B,MAAAA,IAAI;AACL,KATH;AAUD,GAfC,CAAF;AAiBAQ,EAAAA,EAAE,CAAC,4BAAD,EAA+B,UAACR,IAAD,EAAU;AACzCP,qBAAKgB,OAAL,CAAaC,eAAb,YACU,oBADV,EAEGqB,GAFH,CAEO,OAFP,EAEgBlC,KAFhB,EAGGoB,GAHH,CAGO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,QAA5B;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBC,EAAxB,CAA2BE,KAA3B,CAAiC,SAAjC;AACAvB,MAAAA,IAAI;AACL,KAVH;AAWD,GAZC,CAAF;AAcAQ,EAAAA,EAAE,CAAC,kBAAD,EAAqB,UAACR,IAAD,EAAU;AAC/BP,qBAAKgB,OAAL,CAAaC,eAAb,YACU,oBADV,EAEGqB,GAFH,CAEO,OAFP,EAEgBlC,KAFhB,EAGGoB,GAHH,CAGO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACA5B,MAAAA,IAAI;AACL,KAPH;AAQD,GATC,CAAF;AAWAQ,EAAAA,EAAE,CAAC,oCAAD,EAAuC,UAACR,IAAD,EAAU;AACjDP,qBACGgB,OADH,CACWC,eADX,EAEGoC,GAFH,CAEO,eAFP,EAGGf,GAHH,CAGO,OAHP,EAGgBnC,UAHhB,EAIGgB,IAJH,CAIQ,CACJ;AACA;AAFI,KAJR,EAQGK,GARH,CAQO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBE,KAAtB,CAA4B,GAA5B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,MAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBC,EAApB,CAAuBM,EAAvB,CAA0B,QAA1B;AACA5B,MAAAA,IAAI;AACL,KAdH;AAeD,GAhBC,CAAF;AAkBAQ,EAAAA,EAAE,CAAC,wBAAD,EAA2B,UAACR,IAAD,EAAU;AACrCP,qBACGgB,OADH,CACWC,eADX,EAEGqC,KAFH,CAES,iBAFT,EAGGhB,GAHH,CAGO,OAHP,EAGgBnC,UAHhB,EAIGqB,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACArD,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASG,IAAV,CAAN,CAAsBL,EAAtB,CAAyBM,EAAzB,CAA4B,QAA5B;AACA5B,MAAAA,IAAI;AACL,KAVH;AAWD,GAZC,CAAF;AAcAQ,EAAAA,EAAE,CAAC,qCAAD,EAAwC,UAACR,IAAD,EAAU;AAClDP,qBACGgB,OADH,CACWC,eADX,EAEGqC,KAFH,CAES,iBAFT,EAGGhB,GAHH,CAGO,OAHP,EAGgBlC,KAHhB,EAIGoB,GAJH,CAIO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBC,EAAtB,CAAyBC,KAAzB,CAA+B,GAA/B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,QAAlC;AACAlC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBH,EAAjB,CAAoBI,IAApB,CAAyBC,QAAzB,CAAkC,OAAlC;AACA1B,MAAAA,IAAI;AACL,KAVH;AAWD,GAZC,CAAF;AAcAQ,EAAAA,EAAE,CAAC,6CAAD,EAAgD,UAACR,IAAD,EAAU;AAC1DP,qBAAKgB,OAAL,CAAaC,eAAb,EACGqC,KADH,CACS,iBADT,EAEGhB,GAFH,CAEO,OAFP,EAEgBnC,UAFhB,EAGGqB,GAHH,CAGO,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjB3B,MAAAA,MAAM,CAAC2B,GAAG,CAACC,MAAL,CAAN,CAAmBC,EAAnB,CAAsBE,KAAtB,CAA4B,GAA5B;AACA/B,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAL,CAAN,CAAiBF,EAAjB,CAAoBM,EAApB,CAAuB,QAAvB;AACApC,MAAAA,MAAM,CAAC2B,GAAG,CAACK,IAAJ,CAASJ,MAAV,CAAN,CAAwBE,EAAxB,CAA2BuB,CAA3B,CAA6B,QAA7B;AACA7C,MAAAA,IAAI;AACL,KARH;AASD,GAVC,CAAF;AAYD,CA1aO,CAAR","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport app from '../app';\r\nimport pool from '../models/db/db';\r\n\r\nconst { expect } = chai;\r\nchai.use(chaiHttp);\r\nlet admintoken = '';\r\nlet token = '';\r\ndescribe('User Authentication', () => {\r\n  before((done) => {\r\n    const createAdmin = `INSERT INTO users (\r\n        id, email, first_name, last_name, password, is_admin, is_loggedin\r\n        ) VALUES\r\n         ('2', 'oomitiran@gmail.com', 'Olumide', 'Omitiran', '$2b$10$M7KDGr9g3tKfFWC0RpuXI.mZPlEkZarOSQTmhKIxh4GXVRb2OscrO', 'true', 'false')`;\r\n    const deleteBooking = 'DELETE FROM users';\r\n    const deleteText = 'DELETE FROM users;';\r\n    pool.query(deleteBooking, () => {\r\n      pool.query(createAdmin, () => {\r\n        done();\r\n      }).catch(() => {\r\n        console.log('');\r\n      });\r\n    }).catch(() => {\r\n      console.log('');\r\n    });\r\n  });\r\n\r\n  it('Lets a new user register', (done) => {\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/auth/signup')\r\n      .send({\r\n        first_name: 'test',\r\n        last_name: 'user',\r\n        email: 'testuser@gmail.com',\r\n        password: 'password@123',\r\n      }).end((err, res) => {\r\n        expect(res.status).to.be.equal(201);\r\n        expect(res.body.status).to.equal('success');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body.data).to.have.property('user_id');\r\n        expect(res.body.data).to.have.property('token');\r\n        expect(res.body.data).to.have.property('is_admin');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('is_admin property should be a boolean', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signup')\r\n      .send({\r\n\r\n        isAdmin: 'admin',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.equal(400);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('All input fields are required', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signup')\r\n      .send({\r\n        first_name: '',\r\n        last_name: '',\r\n        email: '',\r\n        address: '',\r\n        password: '',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.equal(400);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Checks if email exists', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signup')\r\n      .set('Content-type', 'application/json')\r\n      .set('Accept', 'application/json')\r\n      .send({\r\n        first_name: 'test',\r\n        last_name: 'user',\r\n        email: 'testuser@gmail.com',\r\n        password: 'password@123',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.equal('error');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Lets new and existing users login', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signin')\r\n      .send({\r\n        email: 'testuser@gmail.com',\r\n        password: 'password@123',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body.status).to.equal('success');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body.data).to.have.property('user_id');\r\n        expect(res.body.data).to.have.property('token');\r\n        expect(res.body).to.be.an('object');\r\n        token = res.body.data.token;\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('All fields are required', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signin')\r\n      .send({\r\n        email: '',\r\n        password: '',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Incorrect Password', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signin')\r\n      .send({\r\n        email: 'testuser@gmail.com',\r\n        password: 'secret',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(401);\r\n        expect(res.body.status).to.equal('error');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Lets admin login', (done) => {\r\n    chai.request(app)\r\n      .post('/api/v1/auth/signin')\r\n      .send({\r\n        email: 'oomitiran@gmail.com',\r\n        password: 'password@123',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body.status).to.equal('success');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body.data).to.have.property('user_id');\r\n        expect(res.body.data).to.have.property('token');\r\n        expect(res.body).to.be.an('object');\r\n        admintoken = res.body.data.token;\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('lets Admin create a bus', (done) => {\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/bus')\r\n      .set('token', admintoken)\r\n      .send({\r\n        number_plate: 'FB030AAA',\r\n        manufacturer: 'Toyota',\r\n        model: 'Hiace',\r\n        year: '2019',\r\n        capacity: '18',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.have.equal('success');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('lets Admin create new trip', (done) => {\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/trips')\r\n      .set('token', admintoken)\r\n      .send({\r\n        bus_id: '1',\r\n        origin: 'Lagos',\r\n        destination: 'Ondo',\r\n        trip_date: '2019-07-02',\r\n        fare: '4000',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.have.equal('success');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body.data).to.have.property('fare');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('lets ONLY admin create trip', (done) => {\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/trips')\r\n      .set('token', token)\r\n      .send({\r\n        bus_id: '1',\r\n        origin: 'Ibadan',\r\n        destination: 'Warri',\r\n        trip_date: '2019-05-02',\r\n        fare: '6000',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.status).be.equal(403);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Admin Books a trip', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '4',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/bookings')\r\n      .send(user)\r\n      .set('token', admintoken)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(201);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Get Admin bookings', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '4',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .get('/api/v1/bookings')\r\n      .send(user)\r\n      .set('token', admintoken)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('array');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('User Books a trip', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '5',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/bookings')\r\n      .send(user)\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(201);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('doesnt allow seat number to booked twice', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '5',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .post('/api/v1/bookings')\r\n      .send(user)\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.body.status).to.equal(409);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Get User bookings', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '5',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .get('/api/v1/bookings')\r\n      .send(user)\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('array');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('Requires Token To Get bookings', (done) => {\r\n    const user = {\r\n      trip_id: '1',\r\n      seat_number: '5',\r\n    };\r\n    chai\r\n      .request(app)\r\n      .get('/api/v1/bookings')\r\n      .send(user)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(400);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('lets User delete a Booking', (done) => {\r\n    chai.request(app)\r\n      .delete('/api/v1/bookings/2')\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('object');\r\n        expect(res.body.status).to.equal('success');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('No booking found', (done) => {\r\n    chai.request(app)\r\n      .delete('/api/v1/bookings/0')\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(400);\r\n        expect(res.body).be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('it lets both and user get all trip', (done) => {\r\n    chai\r\n      .request(app)\r\n      .get('/api/v1/trips')\r\n      .set('token', admintoken)\r\n      .send({\r\n        // user_id: '1',\r\n        // is_admin: 'true',\r\n      })\r\n      .end((err, res) => {\r\n        expect(res.status).to.equal(200);\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('data');\r\n        expect(res.body).to.be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('let admin Cancels trip', (done) => {\r\n    chai\r\n      .request(app)\r\n      .patch('/api/v1/trips/1')\r\n      .set('token', admintoken)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(200);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('string');\r\n        expect(res.body.data).be.an('object');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('revokes users rights to cancel trip', (done) => {\r\n    chai\r\n      .request(app)\r\n      .patch('/api/v1/trips/1')\r\n      .set('token', token)\r\n      .end((err, res) => {\r\n        expect(res.status).to.be.equal(403);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body).to.have.property('status');\r\n        expect(res.body).to.have.property('error');\r\n        done();\r\n      });\r\n  });\r\n\r\n  it('cannot cancel an already cancelled Not trip', (done) => {\r\n    chai.request(app)\r\n      .patch('/api/v1/trips/1')\r\n      .set('token', admintoken)\r\n      .end((err, res) => {\r\n        expect(res.status).to.equal(400);\r\n        expect(res.body).be.an('object');\r\n        expect(res.body.status).be.a('number');\r\n        done();\r\n      });\r\n  });\r\n\r\n});"],"file":"test.test.js"}